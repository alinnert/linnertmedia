<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="theme-color" content="#243342"><title>Objekte in JavaScript ‒ Linnert Media</title><link rel="stylesheet" href="/styles.css"></head><body><div class="article-page-header"><div class="article-page-header__top-bar"><div class="article-page-header__logo"><a href="/"><div class="dark-logo"><div class="dark-logo__part-a">linnert</div><div class="dark-logo__part-b">media</div></div></a></div><div class="main-navigation main-navigation--type-dark"><ul class="main-navigation__items"><li class="main-navigation__item"><a href="/" class="main-navigation__item-link">Beiträge</a></li><li class="main-navigation__item"><a href="/autor" class="main-navigation__item-link">Autor</a></li></ul></div></div><div class="article-page-header__topline"><a href="/blog/tag/javascript">JavaScript</a></div><h1 class="article-page-header__title">Objekte in JavaScript</h1><div class="article-page-header__metadata">13.09.2015</div></div><article class="article-content"><p>Objekte sind ein Hauptbestandteil von JavaScript. Diese erlauben es, Strukturen aufzubauen oder Daten und Funktionalitäten zusammenzufassen. Dieser Artikel erklärt, wie sie funktionieren und wie man mit ihnen umgeht.</p><div class="info-box"><div class="info-box__title">Info: Vorwort</div><p>Sehr bald nachdem ich den letzten Artikel veröffentlicht hatte, hat sich mein Bild über Objekte etwas verändert. Ich hab Artikel über JavaScript-Objekte und -Klassen gelesen, begonnen das Buch <a href="http://chimera.labs.oreilly.com/books/1234000000262">Programming JavaScript Applications</a> (von Eric Elliot) zu lesen und Aufzeichnungen von Vorträgen zu diesem Thema anzusehen. Dadurch bin ich jetzt in der Lage, einen tieferen Blick in Objekte zu gewähren als noch vor ein paar Wochen.</p></div><h2>Objekte erstellen</h2><p>Objekte kann man sich als Gruppierung mehrerer Variablen vorstellen. Gehen wir von folgendem Beispiel aus.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Andreas'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mail <span class="token operator">=</span> <span class="token string">'andreas@linnertmedia.de'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> admin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mail<span class="token punctuation">,</span> admin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > Andreas andreas@linnertmedia.de true</span>
</code></pre><p>All diese Daten gehören zu einem Benutzer. Diesen Benutzer möchten wir auch gerne als solchen Behandeln und nicht einzeln von seinen ganzen Eigenschaften sprechen. Hier kommen Objekte ins Spiel.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Andreas'</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>mail <span class="token operator">=</span> <span class="token string">'andreas@linnertmedia.de'</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>admin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > Object {name: "Andreas", mail: "andreas@linnertmedia.de", admin: true}</span>
</code></pre><p>Somit kann man alle Daten des Nutzers über das Objekt <code>user</code> ansprechen. Man nennt die Werte ab hier allerdings nicht mehr Variablen sondern Eigenschaften oder Properties. Üblicher und kürzer ist allerdings folgende Schreibweise.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Andreas'</span><span class="token punctuation">,</span>
    mail<span class="token punctuation">:</span> <span class="token string">'andreas@linnertmedia.de'</span><span class="token punctuation">,</span>
    admin<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Es gibt hier einige wichtige Punkte, die man sich im Hinterkopf behalten sollte. Durch die Klammerschreibweise wird ein neues Objekt erstellt. Weist man dieses Objekt einer Variable (oder auch einer Objekteigenschaft) zu, geht der vorherige Wert verloren. Näheres hierzu erläutere ich in einem eigenen Artikel.</p><h2>Die Namen der Eigenschaften</h2><p>Die Namen der Eigenschaften selbst — in unserem Beispiel <code>name</code>, <code>mail</code> und <code>admin</code> — können jeden simplen Datentyp annehmen (<code>string</code>, <code>number</code>, <code>boolean</code> und <code>symbol</code>). Um das zu demonstrieren, muss eine weitere Möglichkeit verwendet werden, um auf Eigenschaften zuzugreifen.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> thing <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

thing<span class="token punctuation">[</span><span class="token string">'hallo welt'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Hallo JavaScript!'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing<span class="token punctuation">[</span><span class="token string">'hallo welt'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "Hallo JavaScript!"</span>

thing<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'The Answer'</span><span class="token punctuation">;</span>
thing<span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'yes'</span><span class="token punctuation">;</span>

thing<span class="token punctuation">[</span>user<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing<span class="token punctuation">.</span>Andreas<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > 123</span>

<span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'Blume'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
thing<span class="token punctuation">[</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Tulpe'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing<span class="token punctuation">.</span>Blume<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "Tulpe"</span>
</code></pre><p>Die Schreibweise mit eckigen Klammern erlaubt mehr Flexibilität bei der Benennung von Eigenschaften. So kann man beispielsweise auch Leerzeichen oder sogar Zeilenumbrüche verwenden. Ein Nebeneffekt bei der Verwendung von <code>boolean</code> und <code>number</code> ist, dass deren Werte automatisch auch in String-Form verwendbar sind. Es verhält sich in etwa so, als würde automatisch die <code>toString</code>-Methode aufgerufen werden, wenn man einen Boolean- oder Zahlenwert als Propertynamen verwendet. Für Symbole gilt dies allerdings nicht. Da sich Symbole hier sowieso etwas eigen verhalten und die Unterstützung noch nicht so verbreitet ist, gehe ich an dieser Stelle nicht weiter darauf ein.</p><pre class="language-js"><code class="language-js">thing<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'The Answer'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing<span class="token punctuation">[</span><span class="token string">'42'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "The Answer"</span>
</code></pre><p>Ein Einsatzzweck für diese Art der Flexibilität lässt sich sicher schwer finden, jedoch demonstriert dies, was in JavaScript möglich wäre und dass JavaScript-Objekte im Grunde nichts mit Java-Objekten zu tun haben. Unter diesem Gesichtspunkt halte ich den Satz “Alles in JavaScript ist ein Objekt” für Umsteiger äußerst irreführend. Denn er erklärt nicht, wie der Begriff “Objekt” zu verstehen ist.</p><p>Natürlich gilt außerdem weiterhin:</p><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "object"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "string"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">typeof</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "string"</span>
</code></pre><h2>Prototypen</h2><p>Durch ECMAScript 2015 werden Klassen in JavaScript eingeführt. Es gibt Leute, welche der Meinung sind, Klassen sind eines der schlechtesten Features, die auf JavaScript zukommen werden. Ein Grund ist, dass es keine echten Klassen sind und sich die Funktionsweise leicht von wirklich klassenbasierten Sprachen unterscheiden. Der größte Grund ist allerdings, dass JavaScript bereits eine Mechanik bietet, die flexibler ist als Klassen: Prototypen.</p><div class="info-box"><div class="info-box__title">Info: Am Rande</div><p>Ich hab selbst etwas Zeit gebraucht, die Argumente dieser Leute zu verstehen. Der Grund liegt in der leider etwas flachen Argumentation und den fehlenden Beispielen. Nachdem ich mich auf Prototypen eingelassen hatte, wurde mir jedoch vieles klar. Ich möchte an dieser Stelle jedoch nur auf die Funktionsweise der Prototypen eingehen. Für die Vorteile von Prototypen gegenüber Klassen empfehle ich andere Quellen. Videos, Vorträge, Bücher…</p></div><p>Besitzt ein Objekt einen Prototypen, hat man Zugriff auf alle Eigenschaften des Prototyps, ohne Gefahr zu laufen, diese versehentlich zu manipulieren. Da dieser Prototyp ebenfalls ein Objekt ist, kann dieser wiederum einen Prototypen besitzen. Man spricht hier von der Prototypenkette. Greift man auf eine Eigenschaft eines Objekts zu, wird bei diesem Objekt geprüft, ob es eine Eigenschaft mit diesem Namen besitzt. Ist das nicht der Fall, wird dessen Prototyp überprüft usw. Wird eine Eigenschaft in keinem Objekt der Prototypenkette gefunden, ist der Wert <code>undefined</code>.</p><p>Ich stelle mir Objekte im Zusammenhang mit Prototypen wie einen Stapel Blätter vor. Von oben betrachtet sitzt jede Eigenschaft am gleichen Platz auf dem Papier. Fehlt eine Eigenschaft in einem Objekt, befindet sich an der entsprechenden Stelle ein Loch, durch das man das darunterliegende Papier und dessen Wert für diese Eigenschaft sieht, sofern dort ein Wert festgelegt ist.</p><div class="info-box"><div class="info-box__title">Info: ECMAScript 5 und der Internet Explorer</div><p>Einige der hier verwendeten Methoden sind Teil von <em>ECMAScript 5</em>. Diese erfordern <em>Internet Explorer 9</em> oder höher. Für ältere Internet Explorer-Versionen gibt es andere Möglichkeiten, mit Prototypen zu arbeiten.</p></div><p>Man kann Prototypen folgendermaßen definieren. Ich werde hierzu bereits Funktionen in den Beispielen verwenden. Hierzu folgt aber noch ein separater Artikel.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> user<span class="token punctuation">,</span> andreas<span class="token punctuation">,</span> minka<span class="token punctuation">;</span>

user <span class="token operator">=</span> <span class="token punctuation">{</span>
    sayYourName<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'My name is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

andreas <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
andreas<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Andy'</span><span class="token punctuation">;</span>

minka <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Minka'</span><span class="token punctuation">,</span>
    sayYourName<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' Miau!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>minka<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

andreas<span class="token punctuation">.</span><span class="token function">sayYourName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "My name is Andy"</span>
minka<span class="token punctuation">.</span><span class="token function">sayYourName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > "Minka Miau!"</span>
</code></pre><p>Bei der Erstellung von Objekten trenne ich sehr gerne die Deklaration und Initialisierung der Variablen, da das sonst sehr schnell unübersichtlich wird, und die Kommata am Ende von Objekten auf mich etwas seltsam wirken.</p><p>Wir erstellen ein Objekt <code>user</code>, das die Basis von Nutzerobjekten sein wird. Mit <code>Object.create(prototype)</code> erstellen wir ein neues Objekt, legen aber gleichzeitig auch dessen Prototyp fest. Da das Objekt <code>andreas</code> nun <code>user</code> als Prototypen besitzt, erbt es auch dessen Funktion <code>sayYourName</code>. <code>andreas.sayYourName</code> zeigt somit auf die Funktion, die in <code>user</code> definiert wurde. Es handelt sich auch exakt um diese Funktion. Es wurde keine Kopie erstellt.</p><p>Das Schlüsselwort <code>this</code> zeigt dabei immer auf das Objekt, in dessen Kontext die Funktion aufgerufen wurde. Da wir nicht <code>user.sayYourName()</code> aufgerufen haben, sondern <code>andreas.sayYourName()</code>, sucht <code>this</code> innerhalb von <code>andreas</code> nach einer Eigenschaft mit dem Namen <code>name</code>.</p><p><code>Object.setPrototypeOf(object, prototype)</code> erlaubt das nachträgliche Setzen oder Ändern des Prototyps eines Objekts.</p><p>Mit der Methode <code>hasOwnProperty</code> lässt sich prüfen, ob ein Objekt selbst eine bestimmte Eigenschaft besitzt, oder ob es sie nur durch Vererbung hat.</p><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>andreas<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>andreas<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'sayYourName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > false</span>
</code></pre><p>Woher kommt die Funktion <code>hasOwnProperty</code>? Jedes neu erstellte Objekt hat automatisch einen Prototypen, nämlich <code>Object.prototype</code>.</p><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">===</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span>hasOwnProperty <span class="token operator">===</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// > true</span>
</code></pre><p>Da der Artikel bereits sehr lang und vollgestopft mit Informationen ist, mache ich an dieser Stelle einen Schnitt.</p></article></body></html>